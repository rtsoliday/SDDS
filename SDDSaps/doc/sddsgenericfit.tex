%\begin{latexonly}
\newpage
%\end{latexonly}
\subsection{sddsgenericfit}
\label{sddsgenericfit}

\begin{sddsprog}{sddsgenericfit}
  \item \textbf{description:} \verb|sddsgenericfit| does fits to an arbitrary functional form specified by the user.
  \item \textbf{examples:}
    Fit a gaussian to a beam profile to get the rms beam size. In this example, the
    file \verb|beamProfile.sdds| is assumed to contain data to be fit in columns
    \verb|x| and \verb|Intensity|.
    \begin{verbatim}
    sddsgenericfit beamProfile.sdds beamProfile.gfit -column=x,Intensity \
      "-equation=height x center - sqr 2 / sigma sqr / exp / baseline + Intensity - sqr" \
      -variable=name=height,start=1,lower=0,upper=10,step=0.1 \
      -variable=name=center,start=0,lower=-10,upper=10,step=0.1 \
      -variable=name=sigma,start=1,lower=0.1,upper=10,step=0.1 \
      -variable=name=baseline,start=0,lower=-1,upper=1,step=0.1
    \end{verbatim}
  \item \textbf{synopsis:}
    \begin{verbatim}
    sddsgenericfit [-pipe=[input][,output]] [inputfile] [outputfile]
      -columns=x-name,y-name[,ySigma=sy-name]
      -equation=string[,algebraic] [-target=value] [-tolerance=value]
      [-simplex=[restarts=integer][,cycles=integer][,evaluations=integer]]
      -variable=name=name,lowerLimit=value,upperLimit=value,stepsize=value,
        startingValue=value[,units=string][,heat=value]
      [-variable=...] [-verbosity=integer] [-startFromPrevious]
    \end{verbatim}
  \item \textbf{switches:}
    \begin{itemize}
      \item \verb|-pipe=[input][,output]| --- The standard SDDS Toolkit pipe option.
      \item \verb|-columns=x-name,y-name[,ySigma=name]| --- Specifies the names of the independent and dependent columns of data, and
        optionally the name of the column containing the errors in the dependent column.
      \item \verb|-equation=string[,algebraic]| --- Specifies the functional form of the fit, $y(x, \{p_1, p_2, ...\})$,
        where $\{p_1, p_2, ...\}$ represents the parameters of the function and $x$ is the independent variable value.
        The fitting process attempts to minimize the penalty function $\sum_{i=0}^{N-1} (y(x_i, \{p_1, p_2, ...\}) - y_i)^2$
        (or $\sum_{i=0}^{N-1} (y(x_i, \{p_1, p_2, ...\}) - y_i)^2/\sigma_{y,i}^2$ if y sigma values are given)
        by changing the values of the parameters $\{p_1, p_2, ...\}$.
      \item \verb|-tolerance=value| --- Specifies the minimum change in the (weighted) rms residual that is considered
        significant enough to justify continuing optimization.
      \item \verb|-simplex=[restarts=nRestarts][,cycles=nCycles][,evaluations=nEvals]| --- Specifies parameters of the simplex optimization used to perform the fit.
        Each start or restart allows \emph{nCycles} cycles with up to \emph{nEvals} evaluations of the function.
        Defaults are 10 restarts, 10 cycles, and 5000 evaluations.
      \item \verb|-variablename=name,lowerLimit=value,upperLimit=value,stepsize=value,startingValue=value[,units=string][,heat=value]| ---
        Specifies a parameter of the fitting function. If the \verb|heat| qualifier is given, then prior to each restart the code ``heats'' the values by adding random
        numbers to the result of the last iteration. This can help avoid getting stuck
        in a local minimum. You must give one \verb|variable| option for every parameter of the fit.
      \item \verb|-startFromPrevious| --- Meaningful for multipage input files only. If given,
        then the optimization for each page starts from the parameter values from the fit
        to the previous page. By default, fitting for each page starts from the values
        specified on the commandline.
      \item \verb|-verbosity=integer| --- Specifies that informational printouts are desired during fitting. A larger integer produces more output.
    \end{itemize}
  \item \textbf{files:} \emph{inputFile} contains the columns of data to be fit. If \emph{inputFile} contains multiple pages, each page of data is
    fit separately. \emph{outputFile} has columns containing the independent variable data and the corresponding values of the fit.
    The name of the column is constructed by appending the string \verb|Fit| to the name of the dependent variable. The name of the residual
    column is constructed by appending the string \verb|Residual| to the name of the dependent variable. \emph{outputFile} also contains
    parameters giving the values of the fit parameters.
  \item \textbf{see also:}
    \begin{itemize}
      \item \progref{sddsexpfit}
      \item \progref{sddsgfit}
      \item \progref{sddsoutlier}
      \item \progref{sddspfit}
    \end{itemize}
  \item \textbf{author:} M. Borland, ANL/APS.
\end{sddsprog}

